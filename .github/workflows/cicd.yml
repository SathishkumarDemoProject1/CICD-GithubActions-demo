name: Main Branch

on:
  push:
    branches:
      - 'main'
jobs:
    compile:
        name : "Compile project"
        runs-on: ubuntu-18.04
        steps:
          - uses: actions/checkout@v1
          - name: Set up JDK 11
            uses: actions/setup-java@v1
            with:
              java-version: 11.0.4
          - name: Maven compile
            run: mvn compile
    test:
        name : "Unit Test"
        runs-on: ubuntu-18.04
        steps:
          - uses: actions/checkout@v1
          - name: Set up JDK 11
            uses: actions/setup-java@v1
            with:
              java-version: 11.0.4
          - name: Maven test command
            run: mvn test
    build:
        name : "Build project"
        runs-on: ubuntu-18.04
        steps:
          - uses: actions/checkout@v1
          - name: Set up JDK 11
            uses: actions/setup-java@v1
            with:
              java-version: 11.0.4
          - name: Maven test command
            run: mvn install
    #deploy:
          # Home Work

    #      run: mvn deploy -s $GITHUB_WORKSPACE/settings.xml 
    docker:
        name : "Building docker image"
        runs-on: ubuntu-18.04
        environment: dev
        steps:
          - uses: actions/checkout@v1
          - docker login -u ${{secrets.DOCKER_USER_NAME}} -p ${{secrets.DOCKER_PASSWORD}} https://hub.docker.com